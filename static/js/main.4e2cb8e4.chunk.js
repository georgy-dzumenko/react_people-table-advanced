(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{27:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZ0lEQVQ4y2NgGLKgquEuFxBPAGI2ahhWCsS/gDibUoO0gPgxEP8H4ttArEyuQYxAPBdqEAxPBImTY5gjEL9DM+wTENuQahAvEO9DMwiGdwAxOymGJQLxTyD+jgWDxCMZRsEoGAVoAADeemwtPcZI2wAAAABJRU5ErkJggg=="},28:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZUlEQVQ4y2NgGAWjYBSggaqGu5FA/BOIv2PBIPFEUgxjB+IdQPwfC94HxLykus4GiD+hGfQOiB3J8SojEE9EM2wuSJzcsFMG4ttQgx4DsRalkZENxL+AuJQaMcsGxBOAmGvopk8AVz1sLZgg0bsAAAAASUVORK5CYII="},29:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAAkElEQVQoz7XQMQ5AQBCF4dWQSJxC5wwax1Cq1e7BAdxD5SL+Tq/QCM1oNiJidwox0355mXnG/DrEtIQ6azioNZQxI0ykPhTQIwhCR+BmBYtlK7kLJYwWCcJA9M4qdrZrd8pPjZWPtOqdRQy320YSV17OatFC4euts6z39GYMKRPCTKY9UnPQ6P+GtMRfGtPnBCiqhAeJPmkqAAAAAElFTkSuQmCC"},31:function(e,a,t){e.exports=t(51)},50:function(e,a,t){},51:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(24),c=t.n(l),s=t(3),o=t(1),m=function(){return r.a.createElement("p",{className:"title is-3 is-spaced"},"Home")},u=t(14),i=t(4),p=t(26),d=function(e){var a=e.person,t=e.isParent,n=void 0!==t&&t,l=Object(o.h)();return r.a.createElement(p.a,{smooth:!0,to:{pathname:"/people/:".concat(a.slug).concat(l.pathname.includes("/new")?"/new":""),hash:n?"#".concat(a.slug):"",search:l.search}},a.name||"-")};d.defaultProps={isParent:!1};var h=function(e){var a=e.person,t=e.isSelected;return r.a.createElement("tr",{className:t?"is-selected ".concat("f"===a.sex?"has-background-danger-dark":"has-background-link-dark"):"",id:a.slug},r.a.createElement("td",null,r.a.createElement(d,{person:a})),r.a.createElement("td",null,a.sex),r.a.createElement("td",null,a.born),r.a.createElement("td",null,a.died),r.a.createElement("td",null,null!==a.mother?r.a.createElement(d,{person:a.mother,isParent:!0}):r.a.createElement("p",{className:"has-text-weight-bold"},""===a.motherName?"-":a.motherName)),r.a.createElement("td",null,null!==a.father?r.a.createElement(d,{person:a.father,isParent:!0}):r.a.createElement("p",{className:"has-text-weight-bold"},""===a.fatherName?"-":a.fatherName)))},E=t(27),b=t.n(E),f=t(28),g=t.n(f),A=t(29),N=t.n(A),v=function(e){var a,t=e.title,n=Object(o.g)(),l=Object(o.h)(),c=new URLSearchParams(l.search),s=c.get("sortBy"),m=c.get("sortOrder")||1,u="asc"===m?r.a.createElement("img",{src:b.a,alt:""}):r.a.createElement("img",{src:g.a,alt:""});return r.a.createElement("th",{className:"is-clickable is-unselectable",onClick:(a=t,function(){s===a&&"asc"===m?c.set("sortOrder","desc"):c.set("sortOrder","asc"),a?c.set("sortBy",a):c.delete("sortBy"),n.push({search:c.toString()})})},t," ",s===t?u:r.a.createElement("img",{src:N.a,alt:"*"}))},O=function(e){var a=e.people,t=e.selectedPersonSlug;return r.a.createElement("table",{style:{tableRowActiveColor:"red",borderCollapse:"collapse"},className:"table is-hoverable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(v,{title:"name"}),r.a.createElement(v,{title:"sex"}),r.a.createElement(v,{title:"born"}),r.a.createElement(v,{title:"died"}),r.a.createElement("th",null,"mother's name"),r.a.createElement("th",null,"father's name"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(h,{person:e,isSelected:t===":".concat(e.slug)})}))))},x=t(30),j=t.n(x),S=function(){var e=Object(o.g)(),a=Object(o.h)(),t=new URLSearchParams(a.search),l=Object(n.useState)(t.get("query")||""),c=Object(i.a)(l,2),s=c[0],m=c[1],u=Object(n.useCallback)(j()((function(a){a?t.set("query",a):t.delete("query"),e.push({search:t.toString()})}),500),[]);return r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{value:s,onChange:function(e){m(e.target.value),u(e.target.value)},className:"input",type:"text",placeholder:"Enter name of person you want to find"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-search"}))))},C=t(13),y=t(8),P=function(e){var a=e.applyName,t=e.placeholder,l=Object(n.useState)(""),c=Object(i.a)(l,2),s=c[0],o=c[1];return r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Name",r.a.createElement("div",{className:"control"},r.a.createElement("input",{value:s,onChange:function(e){-1===e.target.value.search(/[0-9]/)&&(o(e.target.value),a(e.target.value))},className:"input",type:"text",placeholder:t,required:!0}))))},w=function(e){var a=e.people,t=e.setParent,n=e.disabled,l=e.err,c=e.errText,s=e.title;return r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:l?"is-danger":"",onChange:function(e){t(e.target.value)},disabled:n},r.a.createElement("option",{defaultValue:!0,value:""},s),a?a.map((function(e){return r.a.createElement("option",{value:e.name},e.name)})):""),r.a.createElement("p",{className:"help is-danger"},l?c:""))};w.defaultProps={disabled:!1,err:!1,errText:""};var B=function(e){var a=e.applySex,t=Object(n.useState)(""),l=Object(i.a)(t,2),c=l[0],s=l[1];return r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"}," ","Sex",r.a.createElement("div",{className:"control",value:c,onChange:function(e){a(e.target.value),s(e.target.value)}},r.a.createElement("label",{className:"radio"},r.a.createElement("input",{value:"m",type:"radio",name:"answer",required:!0}),"male"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{value:"f",type:"radio",name:"answer",required:!0}),"female"))))},Q=function(e){var a=e.applyDate,t=e.placeholder,l=e.label,c=e.disabled,s=e.err,o=e.errText,m=e.min,u=Object(n.useState)(""),p=Object(i.a)(u,2),d=p[0],h=p[1];return r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},l),r.a.createElement("div",{className:"control"},r.a.createElement("input",{min:m,max:"2021",disabled:c,value:d,onChange:function(e){h(e.target.value),a(+e.target.value)},className:"input ".concat(s?"is-danger":""),type:"number",placeholder:t,required:!0}),r.a.createElement("p",{className:"help is-danger"},s?o:"")))};Q.defaultProps={disabled:!1,min:1400,errText:"",err:!1};var k=function(e){var a=e.addPerson,t=e.people,l=Object(o.i)("/people/:personSlug?/new"),c=Object(o.g)(),s=Object(o.h)(),m=Object(n.useState)({name:"",sex:"",born:0,died:0,fatherName:"",motherName:"",mother:null,father:null}),u=Object(i.a)(m,2),p=u[0],d=u[1],h=p.name,E=p.sex,b=p.born,f=p.died,g=p.mother,A=p.father,N={deathErr:f-b>=150,motherErr:!!g&&(g.died<b||g.born>b),fatherErr:!!A&&(A.died<b||A.born>b)},v=t?t.sort((function(e,a){return e.name.localeCompare(a.name)})).filter((function(e){return"f"===e.sex})):[],O=t?t.sort((function(e,a){return e.name.localeCompare(a.name)})).filter((function(e){return"m"===e.sex})):[],x=function(e){return function(a){d(Object(y.a)(Object(y.a)({},p),{},Object(C.a)({},e,a)))}};return r.a.createElement("form",{className:"box column is-4",onSubmit:function(e){e.preventDefault(),Object.values(N).reduce((function(e,a){return e&&!a}),!0)&&(a(Object(y.a)(Object(y.a)({},p),{},{slug:"".concat(h.toLowerCase().split(" ").join("-"),"-").concat(b.toString())})),c.push({pathname:"/people",search:s.search}))}},r.a.createElement("button",{type:"button",className:"delete is-pulled-right",onClick:function(){c.push({pathname:"/people".concat(l.params.personSlug?"/".concat(l.params.personSlug):""),search:s.search})}}),r.a.createElement("div",{className:"block"},r.a.createElement(P,{applyName:x("name"),placeholder:"m"===E||""===E?"John Smith":"Jane Smith"}),r.a.createElement(B,{applySex:x("sex")}),r.a.createElement(Q,{placeholder:"1964",label:"birth date",applyDate:x("born")}),r.a.createElement(Q,{placeholder:"1994",label:"death date",applyDate:x("died"),disabled:!b,err:N.deathErr,errText:"people can't live so long",min:b}),r.a.createElement("div",{className:"block"},r.a.createElement(w,{people:v,setParent:function(e){return d(Object(y.a)(Object(y.a)({},p),{},{motherName:e,mother:v.find((function(a){return a.name===e}))||null}))},err:N.motherErr,errText:"she can't be mother of this person",disabled:!b,title:"select mother"})),r.a.createElement("div",{className:"block"},r.a.createElement(w,{people:O,setParent:function(e){return d(Object(y.a)(Object(y.a)({},p),{},{fatherName:e,father:O.find((function(a){return a.name===e}))||null}))},err:N.fatherErr,errText:"he can't be father of this person",disabled:!b,title:"select father"}))),r.a.createElement("button",{type:"submit",className:"button is-success"},"Add person"))},G=function(e){var a=e.match,t=Object(n.useState)([]),l=Object(i.a)(t,2),c=l[0],m=l[1],p=Object(n.useState)(c),d=Object(i.a)(p,2),h=d[0],E=d[1],b=Object(o.h)(),f=new URLSearchParams(b.search),g=f.get("query")||"",A=f.get("sortBy"),N="asc"===f.get("sortOrder")?1:-1;return Object(n.useEffect)((function(){return E(Object(u.a)(c).sort((function(e,a){return"name"===A||"sex"===A?N*e[A].localeCompare(a[A]):"born"===A||"died"===A?N*(+e[A]-+a[A]):0})).filter((function(e){var a=g.toLowerCase();return e.name.toLowerCase().includes(a)||"".concat(e.motherName).toLowerCase().includes(a)||"".concat(e.fatherName).toLowerCase().includes(a)})))}),[A,N,c,g]),Object(n.useEffect)((function(){(function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){return e.map((function(a){var t=a.name,n=a.sex,r=a.born,l=a.died,c=a.fatherName,s=a.motherName,o=a.slug;return{name:t,sex:n,born:r,died:l,motherName:null===s?"":s,fatherName:null===c?"":c,mother:e.find((function(e){return e.name===s}))||null,father:e.find((function(e){return e.name===c}))||null,slug:o}}))}))})().then((function(e){m(e),E(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"title is-3 is-spaced"},"People"),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/people/:personSlug?/new"},r.a.createElement(k,{addPerson:function(e){m([e].concat(Object(u.a)(c)))},people:Object(u.a)(c)})),r.a.createElement(o.b,{path:"/people"},r.a.createElement(s.b,{to:{pathname:"/people/".concat(a.params.personSlug?"".concat(a.params.personSlug,"/"):"","new"),search:b.search},className:"button is-success"},r.a.createElement("i",{className:"fas fa-user-plus"})))),r.a.createElement(S,null),c?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{people:h,selectedPersonSlug:a.params.personSlug})):"")},q=function(){var e=Object(o.h)().search;return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar tabs"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.c,{to:"/",exact:!0,className:"navbar-item is-tab",activeClassName:"is-active"},"Home")),r.a.createElement("li",null,r.a.createElement(s.c,{className:"navbar-item is-tab",activeClassName:"is-active",to:{pathname:"/people",search:e}},"People")))))},D=(t(50),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"title is-3 is-spaced"},"Page not found :("))}),T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(q,null),r.a.createElement("div",{className:"App"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,component:m}),r.a.createElement(o.b,{path:"/people/:personSlug?",component:G}),r.a.createElement(o.a,{path:"/home",to:"/"}),r.a.createElement(D,null)))))};c.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.4e2cb8e4.chunk.js.map